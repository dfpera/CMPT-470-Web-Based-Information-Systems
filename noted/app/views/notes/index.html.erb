<% @page_title = "Dashboard - Noted" %>

<div class="container-fluid">
	<div class="row">
		<!--Left bar-->
		<span class = "visible-lg visible-md">
	  	<div class="col-lg-3 col-md-4 leftbar">

	  		<div class="leftNav">
	  			<!--Buttons on left navigation bar-->
  				<div class="navButtons">
  				 	<%= link_to new_note_path, remote: true, class: "btn btn-primary navbutton" do%>
			  			<span class="glyphicon glyphicon-plus" style="color:white"></span>
			  		<% end %>
		  		</div>
		  		<div class="line">
		  		</div>
	  		</div>

	  		<!--Dropdown for sorting notes-->
	  		<div class="sortmenu">
		  		<%= render partial: 'dropdown_note_sort' %>
				</div>

				<!--Notes area-->
		  	<div class="notes">
					<% @notes.each do |note| %>
			    <tr>
			    	<%= render partial: 'note', locals: {note: note} %>
			    </tr>
			  	<% end %>
		  	</div>

		  	<div class="leftTag">
			  	<div class="well tagbox"></div>
		  	</div>

	  	</div>
	  </span>

	  <!--Right bar-->
	  <div class="col-lg-9 col-md-8 rightbar">
	  		<!--navigation-->
				<nav class="navbar navbar-default">
					<div class="container-fluid">

					 	<div class="navbar-header">
					    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#NavBar">
								<span class="icon-bar"></span>
					      <span class="icon-bar"></span>
					      <span class="icon-bar"></span>
						  </button>
							<a class="navbar-brand" href="">Noted</a>
					  </div>

					  <div class="navbar-collapse collapse" id="NavBar">
							<ul class="nav navbar-nav navbar-left">
								<!--hidden nav buttons-->
								<li class="hidden-md hidden-lg">
									<%= link_to new_note_path, remote: true, class: "btn-sm btn-primary" do%>
			  						<span class="glyphicon glyphicon-plus" style="color:white"></span>
			  					<% end %>
			  				</li>
								<li>
									<%= link_to tag_notes_path, remote: true, class: "btn-sm btn-primary" do%>
			  						<span class="glyphicon glyphicon-tag" style="color:white"></span>
			  					<% end %>
			  				</li>
						  </ul>

						  <ul class="nav navbar-nav navbar-right">
						  	<li class="dropdown">
						  			<li><%= link_to "Logout", logout_accounts_path%></li>
						  	</li>
					    </ul>
					   </div>

					</div>
				</nav>

				<span class="groups visible-lg visible-md">
					<div class="sortmenu">
						<%= render partial: 'dropdown_tag_sort' %>
					</div>
					<!--Groups Area-->
					<div class="groupsArea">
						
						<% @tags.each do |tag| %>
							<tr>
								<div class="panel panel-default">

									<div class = "panel-heading"> <!--Tag Title -->
										<%= render partial: 'tag', locals: {tag: tag} %>
									</div>

									<div class = "panel-body"> <!--Tag Notes -->
										<% tag.notes.each do |note| %>
											<%= render partial: 'note', locals: {note: note} %>
										<% end %>
									</div>
								</div>
							</tr>
						<% end %>
				  </div>
				</span>

				<!--Mobile only-->
		  	<div class = "mobileTabs visible-sm visible-xs">
		  		<ul class="nav nav-tabs">
				    <li class="active tab-width"><a data-toggle="tab" href="#notes">Notes</a></li>
				    <li class="tab-width"><a data-toggle="tab" href="#groups">Groups</a></li>
				  </ul>

					<div class="tab-content">

						<div id="notes" class="tab-pane fade in active">
							<%= render partial: 'dropdown_note_sort' %>
							<div class="spacer"></div>
							<% @notes.each do |note| %>
						    <tr>
						    	<%= render partial: 'note', locals: {note: note} %>
						    </tr>
						  	<% end %>
						</div>

						<div id="groups" class="tab-pane fade">
							<%= render partial: 'dropdown_tag_sort' %>
							<div class="spacer"></div>
							<% @tags.each do |tag| %>
								<tr>
									<div class="panel panel-default">

										<div class = "panel-heading"> <!--Tag Title -->
											<%= render partial: 'tag', locals: {tag: tag} %>

										</div>

										<div class = "panel-body"> <!--Tag Notes -->
												<% tag.notes.each do |note| %>
																    	<%= render partial: 'note', locals: {note: note} %>
											<% end %>
										</div>
									</div>
								</tr>
								<% end %>
						</div>
					</div>
		  	</div>

		  	<%= render 'dialog' %>
		</div>

	</div>
</div>
